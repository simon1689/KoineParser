<ng-container class="container" *ngIf="word !== null">
  <div class="alert alert-secondary text-center font-weight-bold" role="alert">
    {{ state.bibleRange}} ({{wordIndex}} of {{words.length}} words)
    <div>
      <span style="color: green" class="mr-2"><fa-icon [icon]="thumbsUp"></fa-icon>
        {{goodAnswers.length}}</span>
      <span style="color: red" class="mr-2"><fa-icon [icon]="thumbsDown"></fa-icon>
        {{wrongAnswers.length}}</span>
      <span class="mr-2"><fa-icon [icon]="skip"></fa-icon>
        {{skippedWords.length}} </span>
    </div>
  </div>

  <mat-accordion togglePosition="after">
    <mat-expansion-panel #expansionPanel>
      <mat-expansion-panel-header class="text-center" style="font-size: 18px;">
        <mat-panel-title class="greek" style="display: block; text-align: center;">{{word.word}}</mat-panel-title>
      </mat-expansion-panel-header>
      <div class="text-center">
        <p class="card-text">G{{word.strongsNr}}
          <span
            *ngIf="word.lexiconEntry !== undefined && word.lexiconEntry.usage !== undefined">({{word.lexiconEntry.usage}}
            )</span>
          <span
            *ngIf="word.lexiconEntry !== undefined && word.lexiconEntry.shortDefinition !== undefined">{{word.lexiconEntry.shortDefinition}}
              </span>
        </p>
        <p class="card-text greek"
           *ngIf="(word.lexiconEntry !== undefined && word.lexiconEntry.wordComplete !== undefined) && word.lexiconEntry.wordComplete.trim() !== word.word.trim()">{{word.lexiconEntry.wordComplete}}</p>
        <p class="card-text"
           title="{{ morphologyGenerator.convertWordPartsToReadableForm(word.partsOfSpeech, true, true)}}">{{word.morphology}}</p>
      </div>
    </mat-expansion-panel>
  </mat-accordion>

  <br/>

  <form (submit)="submit()" [formGroup]="parsingForm">
    <mat-horizontal-stepper labelPosition="bottom" #stepper [linear]="false">
      <mat-step label="Type">
        <mat-radio-group (change)="determineAvailableControlsWhenTypeIsSelected(null)" id="typeCtrl"
                         formControlName="type">
          <mat-radio-button *ngFor="let type of types" [value]="type.abbreviation"
                            matTooltip="{{type.abbreviation}}"
                            matTooltipPosition="above">{{type.name}}</mat-radio-button>
        </mat-radio-group>
      </mat-step>

      <mat-step label="Tense" [completed]="parsingForm.controls.tense.disabled"
                [editable]="parsingForm.controls.tense.enabled">
        <mat-radio-group id="tenseCtrl" formControlName="tense">
          <mat-radio-button [checked]="true">None</mat-radio-button>
          <mat-radio-button *ngFor="let tense of verbTenses"
                            value="{{tense.abbreviation}}"
                            matTooltip="{{tense.abbreviation}}"
                            matTooltipPosition="above">{{tense.name}}</mat-radio-button>
        </mat-radio-group>
      </mat-step>

      <mat-step label="Voice" [completed]="parsingForm.controls.voice.disabled"
                [editable]="parsingForm.controls.voice.enabled">
        <mat-radio-group id="voiceCtrl" formControlName="voice">
          <mat-radio-button [checked]="true">None</mat-radio-button>
          <mat-radio-button *ngFor="let voice of voices"
                            value="{{voice.abbreviation}}"
                            matTooltip="{{voice.abbreviation}}"
                            matTooltipPosition="above">{{voice.name}}</mat-radio-button>
        </mat-radio-group>
        <p>All other voices such as 'middle or passive' or 'passive deponent' fall under the 'Deponent' option.</p>
      </mat-step>

      <mat-step label="Mood" [completed]="parsingForm.controls.mood.disabled"
                [editable]="parsingForm.controls.mood.enabled">
        <mat-radio-group id="moodCtrl" formControlName="mood" (change)="determineAvailableControlsWhenMoodIsSelected()">
          <mat-radio-button [checked]="true">None</mat-radio-button>
          <mat-radio-button *ngFor="let mood of moods"
                            value="{{mood.abbreviation}}"
                            matTooltip="{{mood.abbreviation}}"
                            matTooltipPosition="above">{{mood.name}}</mat-radio-button>
        </mat-radio-group>
      </mat-step>

      <mat-step label="Person"
                [completed]="this.parsingForm.controls.person.disabled "
                [editable]="this.parsingForm.controls.person.enabled">
        <mat-radio-group id="personCtrl" formControlName="person">
          <mat-radio-button [checked]="true">None</mat-radio-button>
          <mat-radio-button *ngFor="let person of persons"
                            value="{{person.abbreviation}}"
                            matTooltip="{{person.abbreviation}}"
                            matTooltipPosition="above">{{person.name}}</mat-radio-button>
        </mat-radio-group>
      </mat-step>

      <mat-step label="Case, gender, number"
                [completed]="this.parsingForm.controls.case.disabled && this.parsingForm.controls.gender.disabled &&  this.parsingForm.controls.number.disabled"
                [editable]="this.parsingForm.controls.case.enabled && this.parsingForm.controls.gender.enabled && this.parsingForm.controls.number.enabled">

        <h5>Case</h5>
        <mat-radio-group id="caseCtrl" formControlName="case">
          <mat-radio-button [checked]="true">None</mat-radio-button>
          <mat-radio-button *ngFor="let case of cases"
                            value="{{case.abbreviation}}"
                            matTooltip="{{case.abbreviation}}"
                            matTooltipPosition="above">{{case.name}}</mat-radio-button>
        </mat-radio-group>

        <mat-divider></mat-divider>

        <h5>Number</h5>
        <mat-radio-group id="numberCtrl" formControlName="number">
          <mat-radio-button [checked]="true">None</mat-radio-button>
          <mat-radio-button *ngFor="let number of numbers"
                            value="{{number.abbreviation}}"
                            matTooltip="{{number.abbreviation}}"
                            matTooltipPosition="above">{{number.name}}</mat-radio-button>
        </mat-radio-group>

        <mat-divider></mat-divider>

        <h5>Gender</h5>
        <mat-radio-group id="genderCtrl" formControlName="gender">
          <mat-radio-button [checked]="true">None</mat-radio-button>
          <mat-radio-button *ngFor="let gender of genders"
                            value="{{gender.abbreviation}}"
                            matTooltip="{{gender.abbreviation}}"
                            matTooltipPosition="above">{{gender.name}}</mat-radio-button>
        </mat-radio-group>
      </mat-step>
    </mat-horizontal-stepper>

    <div class="d-flex">
      <div class="mr-auto p-2">
        <button mat-raised-button color="warn" (click)="openErrorDialog(this)">Report an error on this page</button>
      </div>
      <div class="p-1">
        <button mat-raised-button (click)="skipWord()" [disabled]="wordIndex >= words.length" type="button"
                color="accent">Skip
        </button>
      </div>
      <div class="p-1">
        <button mat-raised-button color="primary" type="submit" (submit)="submit()" style="margin-right: 10px">
          Answer
        </button>
      </div>
      <div class="p-1">
        <button mat-raised-button [disabled]="wordIndex >= words.length || currentWordIsUnanswered" (click)="nextWord()"
                type="button" color="primary"
        >Next
        </button>
      </div>
    </div>
  </form>
</ng-container>
